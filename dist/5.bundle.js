(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{514:function(t,e,n){"use strict";n.r(e),n.d(e,"transitionProps",(function(){return b}));var r,o,s=n(1),a=n.n(s),i=n(478),c=n.n(i),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype.render=function(){return a.a.createElement("div",{id:"main-test",className:"row"},a.a.createElement("h1",null,"Совместимость"),a.a.createElement(c.a,p({},b,{transitionName:"opacity"}),a.a.createElement("div",{className:"test-description"},"Пройдите этот тест, чтобы узнать, сможете ли Вы со мной подружиться!")),a.a.createElement("hr",null),a.a.createElement(c.a,p({},b,{transitionName:"opacity"}),a.a.createElement("div",{className:"test-start"},a.a.createElement("button",{className:"btn",onClick:this.props.startTest},"Начать"))))},e}(a.a.Component),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.render=function(){var t=this;return a.a.createElement("button",{className:"test-answer btn",title:this.props.label?this.props.label:"",onClick:function(e){return t.props.selectAnswer(e)}},this.props.image&&a.a.createElement("img",{className:"test-answer-img",src:"./images/test/"+this.props.image}),this.props.text&&a.a.createElement("span",{className:"test-answer-text"},this.props.text))},e}(a.a.Component),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],a=0,i=s.length;a<i;a++,o++)r[o]=s[a];return r},w=function(t){function e(e){var n=t.call(this,e)||this;return n.selectAnswer=function(t,e){var r=n.state.questions[n.state.currentQuestionIndex].id,o=d(n.state.answers,[{questionId:r,answerId:null==e?void 0:e.id}]);if(n.state.currentQuestionIndex!==n.state.questions.length-1){var s=n.state.currentQuestionIndex+1;n.setState({currentQuestionIndex:s,answers:o})}else n.getTestResult(o)},n.getTestResult=function(t){fetch("/test/getTestResult",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){var e=t.json();return t.ok?e:e.then((function(t){throw t}))})).then((function(t){n.props.finishTest(t)})).catch((function(t){return console.error(t.code)}))},n.state={currentQuestionIndex:0,answers:[]},n}return m(e,t),e.prototype.componentDidMount=function(){var t=this;fetch("/test/getTestQuestions").then((function(t){var e=t.json();return t.ok?e:e.then((function(t){throw t}))})).then((function(e){t.setState({questions:e.questions})})).catch((function(t){return console.error(t.code)}))},e.prototype.render=function(){var t=this;if(!this.state.questions)return"";var e=this.state.currentQuestionIndex,n=this.state.questions[e],r=n.text,o=n.availableAnswers.map((function(e){return a.a.createElement(h,y({},e,{key:e.id,selectAnswer:function(n){return t.selectAnswer(n,e)}}))}));return a.a.createElement("div",{id:"main-test",className:"row"},a.a.createElement("h1",null,"Вопрос ",e+1),a.a.createElement(c.a,y({},b,{transitionName:"opacity"}),a.a.createElement("div",{key:n.id,className:"test-question"},r)),a.a.createElement("hr",null),a.a.createElement(c.a,y({},b,{transitionName:"opacity"}),a.a.createElement("div",{key:n.id,className:"test-answers"},o)))},e}(a.a.Component),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},O=function(t){function e(e){return t.call(this,e)||this}return v(e,t),e.prototype.render=function(){var t="";return t=this.props.correctAnswersCount<this.props.commonAnswersCount/2?"К сожалению, маловероятно, что мы станем близкими друзьями. Но вот хорошими коллегами - почему бы и нет! :)":"Ого, у нас так много общего! Думаю, что мы легко сможем подружиться! :)",a.a.createElement("div",{id:"main-test",className:"row"},a.a.createElement("h1",null,"Результат"),a.a.createElement(c.a,_({},b,{transitionName:"opacity"}),a.a.createElement("h2",null,"Количество правильных ответов ",this.props.correctAnswersCount," из ",this.props.commonAnswersCount,"."),a.a.createElement("div",{className:"test-result-description"},t)))},e}(a.a.Component),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t[t.NotStarted=0]="NotStarted",t[t.InProcess=1]="InProcess",t[t.Finished=2]="Finished"}(o||(o={}));var b={transitionEnter:!0,transitionLeave:!1,transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:300},N=function(t){function e(e){var n=t.call(this,e)||this;return n.startTest=function(t){n.setState({status:o.InProcess})},n.finishTest=function(t){n.setState({status:o.Finished,result:t})},n.state={status:o.NotStarted},n}return E(e,t),e.prototype.render=function(){var t;switch(this.state.status){case o.NotStarted:t=a.a.createElement(l,{startTest:this.startTest});break;case o.InProcess:t=a.a.createElement(w,{finishTest:this.finishTest});break;case o.Finished:t=a.a.createElement(O,{correctAnswersCount:this.state.result.correctAnswersCount,commonAnswersCount:this.state.result.commonAnswersCount})}return a.a.createElement("div",{className:"main"},t)},e}(a.a.Component);e.default=N}}]);